
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Pait(π tool) - Python Modern API Tools, easier to use web frameworks/write API routing">
      
      
      
      
        <link rel="prev" href="../3_3_security/">
      
      
        <link rel="next" href="../5_1_introduction/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Unit test helper - Pait</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../termynal.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1usage-of-testhelper" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Pait" class="md-header__button md-logo" aria-label="Pait" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pait
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Unit test helper
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/pait/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/pait-zh-doc/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/so1n/pait" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    so1n/pait
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Pait" class="md-nav__button md-logo" aria-label="Pait" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Pait
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/so1n/pait" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    so1n/pait
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Type conversion and parameter validation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Type conversion and parameter validation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1_1_introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1_2_how_to_use_field/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to use Field
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1_3_how_to_use_type/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to use Type
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1_4_depend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Depend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../1_5_exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exception
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../2_how_to_use_pait/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to use Pait decorator
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenAPI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            OpenAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../3_1_openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../3_2_openapi_route/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI Route
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../3_3_security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Unit test helper
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Unit test helper
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1usage-of-testhelper" class="md-nav__link">
    1.Usage of TestHelper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2parameter-introduction" class="md-nav__link">
    2.Parameter introduction
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugin
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Plugin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_1_introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_2_param_check_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameter checking plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_3_json_response_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Json response plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_4_mock_json_response_check_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mock response plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_5_cache_response/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Response caching plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../5_x_how_tp_customize_the_plugin.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to customize plugins
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../6_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../8_other/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1usage-of-testhelper" class="md-nav__link">
    1.Usage of TestHelper
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2parameter-introduction" class="md-nav__link">
    2.Parameter introduction
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Unit test helper</h1>

<p>Currently, <code>Pait</code> provides a simple unit test support through <code>TestHelper</code>,
which runs tests by automatically adding URLs, HTTP methods and other parameters by route functions.
And when getting the result, it will get the most matching response model from <code>response_modle_list</code> for simple validation,
thus reducing the amount of code required for developers to write test cases.</p>
<h2 id="1usage-of-testhelper">1.Usage of TestHelper</h2>
<p>The sample code used this time is to expand the sample code on the home page,
the main change is to add a parameter named <code>return_error_resp</code> in the route function,
when <code>return_error_resp</code> is <code>True</code> it will return a response that does not match the response model,
the code is as follows:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Flask</label><label for="__tabbed_1_2">Starlette</label><label for="__tabbed_1_3">Sanic</label><label for="__tabbed_1_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># flake8: noqa: E402</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">Response</span><span class="p">,</span> <span class="n">jsonify</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kn">from</span> <span class="nn">pait.app.flask</span> <span class="kn">import</span> <span class="n">pait</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="kn">from</span> <span class="nn">pait.field</span> <span class="kn">import</span> <span class="n">Json</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="kn">from</span> <span class="nn">pait.model.response</span> <span class="kn">import</span> <span class="n">JsonResponseModel</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">class</span> <span class="nc">DemoResponseModel</span><span class="p">(</span><span class="n">JsonResponseModel</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="k">class</span> <span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>        <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>        <span class="n">user_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;demo response&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="n">response_data</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">ResponseModel</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="hll"><span class="nd">@pait</span><span class="p">(</span><span class="n">response_model_list</span><span class="o">=</span><span class="p">[</span><span class="n">DemoResponseModel</span><span class="p">])</span>
</span><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="k">def</span> <span class="nf">demo_post</span><span class="p">(</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user id&quot;</span><span class="p">,</span> <span class="n">gt</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user name&quot;</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="hll">    <span class="n">return_error_resp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;return error resp&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="k">if</span> <span class="n">return_error_resp</span><span class="p">:</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">()</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">})</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># flake8: noqa: E402</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kn">from</span> <span class="nn">starlette.applications</span> <span class="kn">import</span> <span class="n">Starlette</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kn">from</span> <span class="nn">starlette.responses</span> <span class="kn">import</span> <span class="n">JSONResponse</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="kn">from</span> <span class="nn">starlette.routing</span> <span class="kn">import</span> <span class="n">Route</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="kn">from</span> <span class="nn">pait.app.starlette</span> <span class="kn">import</span> <span class="n">pait</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="kn">from</span> <span class="nn">pait.field</span> <span class="kn">import</span> <span class="n">Json</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="kn">from</span> <span class="nn">pait.model.response</span> <span class="kn">import</span> <span class="n">JsonResponseModel</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="k">class</span> <span class="nc">DemoResponseModel</span><span class="p">(</span><span class="n">JsonResponseModel</span><span class="p">):</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>    <span class="k">class</span> <span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>        <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a>        <span class="n">user_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;demo response&quot;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a>    <span class="n">response_data</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">ResponseModel</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="hll"><span class="nd">@pait</span><span class="p">(</span><span class="n">response_model_list</span><span class="o">=</span><span class="p">[</span><span class="n">DemoResponseModel</span><span class="p">])</span>
</span><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">demo_post</span><span class="p">(</span>
<a id="__codelineno-1-25" name="__codelineno-1-25"></a>    <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user id&quot;</span><span class="p">,</span> <span class="n">gt</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user name&quot;</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="hll">    <span class="n">return_error_resp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;return error resp&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JSONResponse</span><span class="p">:</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a>    <span class="k">if</span> <span class="n">return_error_resp</span><span class="p">:</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a>        <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">({})</span>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a>    <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">({</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a>
<a id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="kn">import</span> <span class="nn">uvicorn</span>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># flake8: noqa: E402</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kn">from</span> <span class="nn">sanic.app</span> <span class="kn">import</span> <span class="n">Sanic</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kn">from</span> <span class="nn">sanic.response</span> <span class="kn">import</span> <span class="n">HTTPResponse</span><span class="p">,</span> <span class="n">json</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="kn">from</span> <span class="nn">pait.app.sanic</span> <span class="kn">import</span> <span class="n">pait</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="kn">from</span> <span class="nn">pait.field</span> <span class="kn">import</span> <span class="n">Json</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="kn">from</span> <span class="nn">pait.model.response</span> <span class="kn">import</span> <span class="n">JsonResponseModel</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="k">class</span> <span class="nc">DemoResponseModel</span><span class="p">(</span><span class="n">JsonResponseModel</span><span class="p">):</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>    <span class="k">class</span> <span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>        <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>        <span class="n">user_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;demo response&quot;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>    <span class="n">response_data</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">ResponseModel</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="hll"><span class="nd">@pait</span><span class="p">(</span><span class="n">response_model_list</span><span class="o">=</span><span class="p">[</span><span class="n">DemoResponseModel</span><span class="p">])</span>
</span><a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">demo_post</span><span class="p">(</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>    <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user id&quot;</span><span class="p">,</span> <span class="n">gt</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a>    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user name&quot;</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="hll">    <span class="n">return_error_resp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;return error resp&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTTPResponse</span><span class="p">:</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a>    <span class="k">if</span> <span class="n">return_error_resp</span><span class="p">:</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a>        <span class="k">return</span> <span class="n">json</span><span class="p">({})</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a>    <span class="k">return</span> <span class="n">json</span><span class="p">({</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="kn">import</span> <span class="nn">uvicorn</span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># flake8: noqa: E402</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="kn">from</span> <span class="nn">tornado.web</span> <span class="kn">import</span> <span class="n">Application</span><span class="p">,</span> <span class="n">RequestHandler</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="kn">from</span> <span class="nn">pait.app.tornado</span> <span class="kn">import</span> <span class="n">pait</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="kn">from</span> <span class="nn">pait.field</span> <span class="kn">import</span> <span class="n">Json</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="kn">from</span> <span class="nn">pait.model.response</span> <span class="kn">import</span> <span class="n">JsonResponseModel</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="k">class</span> <span class="nc">DemoResponseModel</span><span class="p">(</span><span class="n">JsonResponseModel</span><span class="p">):</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="k">class</span> <span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>        <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>        <span class="n">user_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">()</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;demo response&quot;</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>    <span class="n">response_data</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">ResponseModel</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="k">class</span> <span class="nc">DemoHandler</span><span class="p">(</span><span class="n">RequestHandler</span><span class="p">):</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="hll">    <span class="nd">@pait</span><span class="p">(</span><span class="n">response_model_list</span><span class="o">=</span><span class="p">[</span><span class="n">DemoResponseModel</span><span class="p">])</span>
</span><a id="__codelineno-3-23" name="__codelineno-3-23"></a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>        <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user id&quot;</span><span class="p">,</span> <span class="n">gt</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>        <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;user name&quot;</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="hll">        <span class="n">return_error_resp</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;return error resp&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><a id="__codelineno-3-28" name="__codelineno-3-28"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a>        <span class="k">if</span> <span class="n">return_error_resp</span><span class="p">:</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">({})</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">)</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="kn">from</span> <span class="nn">tornado.ioloop</span> <span class="kn">import</span> <span class="n">IOLoop</span>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Then can write test cases with <code>TestHelper</code>,
first need to import <code>TestHelper</code> and the test client for the corresponding web framework and also initialize the test framework:.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Flask</label><label for="__tabbed_2_2">Starlette</label><label for="__tabbed_2_3">Sanic</label><label for="__tabbed_2_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <code>Flask</code> automatically registers the <code>OPTIONS</code> method in the route that registers the <code>POST</code> method,
which interferes with the autodiscovery of <code>TestHelper</code>'s HTTP methods,
need to block the <code>OPTIONS</code> method with <code>apply_block_http_method_set</code>.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span>
<span class="normal"><a href="#__codelineno-4-47">47</a></span>
<span class="normal"><a href="#__codelineno-4-48">48</a></span>
<span class="normal"><a href="#__codelineno-4-49">49</a></span>
<span class="normal"><a href="#__codelineno-4-50">50</a></span>
<span class="normal"><a href="#__codelineno-4-51">51</a></span>
<span class="normal"><a href="#__codelineno-4-52">52</a></span>
<span class="normal"><a href="#__codelineno-4-53">53</a></span>
<span class="normal"><a href="#__codelineno-4-54">54</a></span>
<span class="normal"><a href="#__codelineno-4-55">55</a></span>
<span class="normal"><a href="#__codelineno-4-56">56</a></span>
<span class="normal"><a href="#__codelineno-4-57">57</a></span>
<span class="normal"><a href="#__codelineno-4-58">58</a></span>
<span class="normal"><a href="#__codelineno-4-59">59</a></span>
<span class="normal"><a href="#__codelineno-4-60">60</a></span>
<span class="normal"><a href="#__codelineno-4-61">61</a></span>
<span class="normal"><a href="#__codelineno-4-62">62</a></span>
<span class="normal"><a href="#__codelineno-4-63">63</a></span>
<span class="normal"><a href="#__codelineno-4-64">64</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="kn">from</span> <span class="nn">pait.extra.config</span> <span class="kn">import</span> <span class="n">apply_block_http_method_set</span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="c1">###########################################################</span>
<a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="c1"># Block the OPTIONS method that Flask automatically adds  #</span>
<a id="__codelineno-4-37" name="__codelineno-4-37"></a><span class="c1">###########################################################</span>
<a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="kn">from</span> <span class="nn">pait.g</span> <span class="kn">import</span> <span class="n">config</span>
<a id="__codelineno-4-39" name="__codelineno-4-39"></a>
<a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="n">config</span><span class="o">.</span><span class="n">init_config</span><span class="p">(</span><span class="n">apply_func_list</span><span class="o">=</span><span class="p">[</span><span class="n">apply_block_http_method_set</span><span class="p">({</span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">})])</span>
<a id="__codelineno-4-41" name="__codelineno-4-41"></a>
<a id="__codelineno-4-42" name="__codelineno-4-42"></a>
<a id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="c1">#############</span>
<a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="c1"># unit test #</span>
<a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="c1">#############</span>
<a id="__codelineno-4-46" name="__codelineno-4-46"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span>
<a id="__codelineno-4-47" name="__codelineno-4-47"></a>
<a id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="kn">import</span> <span class="nn">pytest</span>
<a id="__codelineno-4-49" name="__codelineno-4-49"></a><span class="kn">from</span> <span class="nn">flask.ctx</span> <span class="kn">import</span> <span class="n">AppContext</span>
<a id="__codelineno-4-50" name="__codelineno-4-50"></a><span class="kn">from</span> <span class="nn">flask.testing</span> <span class="kn">import</span> <span class="n">FlaskClient</span>
<a id="__codelineno-4-51" name="__codelineno-4-51"></a>
<a id="__codelineno-4-52" name="__codelineno-4-52"></a><span class="kn">from</span> <span class="nn">pait.app.flask</span> <span class="kn">import</span> <span class="n">FlaskTestHelper</span>
<a id="__codelineno-4-53" name="__codelineno-4-53"></a>
<a id="__codelineno-4-54" name="__codelineno-4-54"></a>
<a id="__codelineno-4-55" name="__codelineno-4-55"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<a id="__codelineno-4-56" name="__codelineno-4-56"></a><span class="k">def</span> <span class="nf">client</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">FlaskClient</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-4-57" name="__codelineno-4-57"></a>    <span class="c1"># Flask provides a way to test your application by exposing the Werkzeug test Client</span>
<a id="__codelineno-4-58" name="__codelineno-4-58"></a>    <span class="c1"># and handling the context locals for you.</span>
<a id="__codelineno-4-59" name="__codelineno-4-59"></a>    <span class="n">client</span><span class="p">:</span> <span class="n">FlaskClient</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span>
<a id="__codelineno-4-60" name="__codelineno-4-60"></a>    <span class="c1"># Establish an application context before running the tests.</span>
<a id="__codelineno-4-61" name="__codelineno-4-61"></a>    <span class="n">ctx</span><span class="p">:</span> <span class="n">AppContext</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">()</span>
<a id="__codelineno-4-62" name="__codelineno-4-62"></a>    <span class="n">ctx</span><span class="o">.</span><span class="n">push</span><span class="p">()</span>
<a id="__codelineno-4-63" name="__codelineno-4-63"></a>    <span class="k">yield</span> <span class="n">client</span>  <span class="c1"># this is where the testing happens!</span>
<a id="__codelineno-4-64" name="__codelineno-4-64"></a>    <span class="n">ctx</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code>with TestClient(app) as client</code>, <code>Starlette</code> automatically calls the app's <code>startup</code> and <code>shutdown</code> methods, which is a good habit to get into when using <code>with TestClient(app) as client</code>, even though it's not used in this test case.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span>
<span class="normal"><a href="#__codelineno-5-41">41</a></span>
<span class="normal"><a href="#__codelineno-5-42">42</a></span>
<span class="normal"><a href="#__codelineno-5-43">43</a></span>
<span class="normal"><a href="#__codelineno-5-44">44</a></span>
<span class="normal"><a href="#__codelineno-5-45">45</a></span>
<span class="normal"><a href="#__codelineno-5-46">46</a></span>
<span class="normal"><a href="#__codelineno-5-47">47</a></span>
<span class="normal"><a href="#__codelineno-5-48">48</a></span>
<span class="normal"><a href="#__codelineno-5-49">49</a></span>
<span class="normal"><a href="#__codelineno-5-50">50</a></span>
<span class="normal"><a href="#__codelineno-5-51">51</a></span>
<span class="normal"><a href="#__codelineno-5-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span>
<a id="__codelineno-5-39" name="__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="c1">#############</span>
<a id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="c1"># unit test #</span>
<a id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="c1">#############</span>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a><span class="kn">import</span> <span class="nn">pytest</span>
<a id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="kn">from</span> <span class="nn">starlette.testclient</span> <span class="kn">import</span> <span class="n">TestClient</span>
<a id="__codelineno-5-45" name="__codelineno-5-45"></a>
<a id="__codelineno-5-46" name="__codelineno-5-46"></a><span class="kn">from</span> <span class="nn">pait.app.starlette</span> <span class="kn">import</span> <span class="n">StarletteTestHelper</span>
<a id="__codelineno-5-47" name="__codelineno-5-47"></a>
<a id="__codelineno-5-48" name="__codelineno-5-48"></a>
<a id="__codelineno-5-49" name="__codelineno-5-49"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<a id="__codelineno-5-50" name="__codelineno-5-50"></a><span class="k">def</span> <span class="nf">client</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">TestClient</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-5-51" name="__codelineno-5-51"></a>    <span class="k">with</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
<a id="__codelineno-5-52" name="__codelineno-5-52"></a>        <span class="k">yield</span> <span class="n">client</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-39">39</a></span>
<span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span>
<span class="normal"><a href="#__codelineno-6-44">44</a></span>
<span class="normal"><a href="#__codelineno-6-45">45</a></span>
<span class="normal"><a href="#__codelineno-6-46">46</a></span>
<span class="normal"><a href="#__codelineno-6-47">47</a></span>
<span class="normal"><a href="#__codelineno-6-48">48</a></span>
<span class="normal"><a href="#__codelineno-6-49">49</a></span>
<span class="normal"><a href="#__codelineno-6-50">50</a></span>
<span class="normal"><a href="#__codelineno-6-51">51</a></span>
<span class="normal"><a href="#__codelineno-6-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-39" name="__codelineno-6-39"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span>
<a id="__codelineno-6-40" name="__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a><span class="c1">#############</span>
<a id="__codelineno-6-42" name="__codelineno-6-42"></a><span class="c1"># unit test #</span>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a><span class="c1">#############</span>
<a id="__codelineno-6-44" name="__codelineno-6-44"></a><span class="kn">import</span> <span class="nn">pytest</span>
<a id="__codelineno-6-45" name="__codelineno-6-45"></a><span class="kn">from</span> <span class="nn">sanic_testing.testing</span> <span class="kn">import</span> <span class="n">SanicTestClient</span>
<a id="__codelineno-6-46" name="__codelineno-6-46"></a>
<a id="__codelineno-6-47" name="__codelineno-6-47"></a><span class="kn">from</span> <span class="nn">pait.app.sanic</span> <span class="kn">import</span> <span class="n">SanicTestHelper</span>
<a id="__codelineno-6-48" name="__codelineno-6-48"></a>
<a id="__codelineno-6-49" name="__codelineno-6-49"></a>
<a id="__codelineno-6-50" name="__codelineno-6-50"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<a id="__codelineno-6-51" name="__codelineno-6-51"></a><span class="k">def</span> <span class="nf">client</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">SanicTestClient</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-6-52" name="__codelineno-6-52"></a>    <span class="k">yield</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently I don't know how to execute <code>Tornado</code> test cases via <code>Pytest</code>, so I used <code>Tornado</code>'s <code>AsyncHTTPTestCase</code> for initialization. If you know how to execute <code>Tornado</code> test cases via <code>Pytest</code>, feel free to give feedback via <a href="https://github.com/so1n/pait/issues">issue</a>.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span>
<span class="normal"><a href="#__codelineno-7-45">45</a></span>
<span class="normal"><a href="#__codelineno-7-46">46</a></span>
<span class="normal"><a href="#__codelineno-7-47">47</a></span>
<span class="normal"><a href="#__codelineno-7-48">48</a></span>
<span class="normal"><a href="#__codelineno-7-49">49</a></span>
<span class="normal"><a href="#__codelineno-7-50">50</a></span>
<span class="normal"><a href="#__codelineno-7-51">51</a></span>
<span class="normal"><a href="#__codelineno-7-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-38" name="__codelineno-7-38"></a><span class="kn">from</span> <span class="nn">tornado.testing</span> <span class="kn">import</span> <span class="n">AsyncHTTPTestCase</span>
<a id="__codelineno-7-39" name="__codelineno-7-39"></a>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a><span class="c1">#############</span>
<a id="__codelineno-7-41" name="__codelineno-7-41"></a><span class="c1"># unit test #</span>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a><span class="c1">#############</span>
<a id="__codelineno-7-43" name="__codelineno-7-43"></a><span class="kn">from</span> <span class="nn">pait.app.tornado</span> <span class="kn">import</span> <span class="n">TornadoTestHelper</span>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a>
<a id="__codelineno-7-45" name="__codelineno-7-45"></a>
<a id="__codelineno-7-46" name="__codelineno-7-46"></a><span class="k">class</span> <span class="nc">TestTornado</span><span class="p">(</span><span class="n">AsyncHTTPTestCase</span><span class="p">):</span>
<a id="__codelineno-7-47" name="__codelineno-7-47"></a>    <span class="k">def</span> <span class="nf">get_app</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Application</span><span class="p">:</span>
<a id="__codelineno-7-48" name="__codelineno-7-48"></a>        <span class="k">return</span> <span class="n">app</span>
<a id="__codelineno-7-49" name="__codelineno-7-49"></a>
<a id="__codelineno-7-50" name="__codelineno-7-50"></a>    <span class="k">def</span> <span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-7-51" name="__codelineno-7-51"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an absolute url for the given path on the test server.&quot;&quot;&quot;</span>
<a id="__codelineno-7-52" name="__codelineno-7-52"></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">://localhost:</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_protocol</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_http_port</span><span class="p">(),</span> <span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>After writing the initialization code for the test case, it is time to write the test case code,
first it will be demonstrated how to write a test case through <code>TestHelper</code> with the following code:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:4"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Flask</label><label for="__tabbed_3_2">Starlette</label><label for="__tabbed_3_3">Sanic</label><label for="__tabbed_3_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-65">65</a></span>
<span class="normal"><a href="#__codelineno-8-66">66</a></span>
<span class="normal"><a href="#__codelineno-8-67">67</a></span>
<span class="normal"><a href="#__codelineno-8-68">68</a></span>
<span class="normal"><a href="#__codelineno-8-69">69</a></span>
<span class="normal"><a href="#__codelineno-8-70">70</a></span>
<span class="normal"><a href="#__codelineno-8-71">71</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-65" name="__codelineno-8-65"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_call_json</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">FlaskClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-8-66" name="__codelineno-8-66"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">FlaskTestHelper</span><span class="p">(</span>
<a id="__codelineno-8-67" name="__codelineno-8-67"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-8-68" name="__codelineno-8-68"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-8-69" name="__codelineno-8-69"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-8-70" name="__codelineno-8-70"></a>    <span class="p">)</span>
<a id="__codelineno-8-71" name="__codelineno-8-71"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-50">50</a></span>
<span class="normal"><a href="#__codelineno-9-51">51</a></span>
<span class="normal"><a href="#__codelineno-9-52">52</a></span>
<span class="normal"><a href="#__codelineno-9-53">53</a></span>
<span class="normal"><a href="#__codelineno-9-54">54</a></span>
<span class="normal"><a href="#__codelineno-9-55">55</a></span>
<span class="normal"><a href="#__codelineno-9-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-50" name="__codelineno-9-50"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_call_json</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">TestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-9-51" name="__codelineno-9-51"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">StarletteTestHelper</span><span class="p">(</span>
<a id="__codelineno-9-52" name="__codelineno-9-52"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-9-53" name="__codelineno-9-53"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-9-54" name="__codelineno-9-54"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-9-55" name="__codelineno-9-55"></a>    <span class="p">)</span>
<a id="__codelineno-9-56" name="__codelineno-9-56"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-50">50</a></span>
<span class="normal"><a href="#__codelineno-10-51">51</a></span>
<span class="normal"><a href="#__codelineno-10-52">52</a></span>
<span class="normal"><a href="#__codelineno-10-53">53</a></span>
<span class="normal"><a href="#__codelineno-10-54">54</a></span>
<span class="normal"><a href="#__codelineno-10-55">55</a></span>
<span class="normal"><a href="#__codelineno-10-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-50" name="__codelineno-10-50"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_call_json</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">SanicTestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-10-51" name="__codelineno-10-51"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">SanicTestHelper</span><span class="p">(</span>
<a id="__codelineno-10-52" name="__codelineno-10-52"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-10-53" name="__codelineno-10-53"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-10-54" name="__codelineno-10-54"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-10-55" name="__codelineno-10-55"></a>    <span class="p">)</span>
<a id="__codelineno-10-56" name="__codelineno-10-56"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-50">50</a></span>
<span class="normal"><a href="#__codelineno-11-51">51</a></span>
<span class="normal"><a href="#__codelineno-11-52">52</a></span>
<span class="normal"><a href="#__codelineno-11-53">53</a></span>
<span class="normal"><a href="#__codelineno-11-54">54</a></span>
<span class="normal"><a href="#__codelineno-11-55">55</a></span>
<span class="normal"><a href="#__codelineno-11-56">56</a></span>
<span class="normal"><a href="#__codelineno-11-57">57</a></span>
<span class="normal"><a href="#__codelineno-11-58">58</a></span>
<span class="normal"><a href="#__codelineno-11-59">59</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-50" name="__codelineno-11-50"></a><span class="k">class</span> <span class="nc">TestTornado</span><span class="p">(</span><span class="n">AsyncHTTPTestCase</span><span class="p">):</span>
<a id="__codelineno-11-51" name="__codelineno-11-51"></a>    <span class="o">...</span>
<a id="__codelineno-11-52" name="__codelineno-11-52"></a>
<a id="__codelineno-11-53" name="__codelineno-11-53"></a>    <span class="k">def</span> <span class="nf">test_demo_post_route_by_call_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-11-54" name="__codelineno-11-54"></a>        <span class="n">test_helper</span> <span class="o">=</span> <span class="n">TornadoTestHelper</span><span class="p">(</span>
<a id="__codelineno-11-55" name="__codelineno-11-55"></a>            <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-11-56" name="__codelineno-11-56"></a>            <span class="n">func</span><span class="o">=</span><span class="n">DemoHandler</span><span class="o">.</span><span class="n">post</span><span class="p">,</span>
<a id="__codelineno-11-57" name="__codelineno-11-57"></a>            <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-11-58" name="__codelineno-11-58"></a>        <span class="p">)</span>
<a id="__codelineno-11-59" name="__codelineno-11-59"></a>        <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In this test case, <code>TestHelper</code> will be initialized,
<code>TestHelper</code> initialization requires the Web framework corresponding to the test client,
the route function, as well as the route function of some of the request parameters,
after the initialization is complete, you can get the request response through the <code>TestHelper</code>.</p>
<p>While executing the test, <code>TestHelper</code> automatically discovers the <code>URL</code> and HTTP method of the route function.
So when calling the <code>json</code> method, <code>TestHelper</code> will automatically initiate a <code>post</code> request and gets the response result.
Then it serializes the response Body into a <code>Python</code> <code>dict</code> object and returns it.
However, when the route function is bound to more than one request method,
<code>TestHelper</code> will not be able to do this automatically,
and need to specify the corresponding HTTP method when calling the <code>json</code> method, using the following method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:4"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Flask</label><label for="__tabbed_4_2">Starlette</label><label for="__tabbed_4_3">Sanic</label><label for="__tabbed_4_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-74">74</a></span>
<span class="normal"><a href="#__codelineno-12-75">75</a></span>
<span class="normal"><a href="#__codelineno-12-76">76</a></span>
<span class="normal"><a href="#__codelineno-12-77">77</a></span>
<span class="normal"><a href="#__codelineno-12-78">78</a></span>
<span class="normal"><a href="#__codelineno-12-79">79</a></span>
<span class="normal"><a href="#__codelineno-12-80">80</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-74" name="__codelineno-12-74"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_use_method</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">FlaskClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-12-75" name="__codelineno-12-75"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">FlaskTestHelper</span><span class="p">(</span>
<a id="__codelineno-12-76" name="__codelineno-12-76"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-12-77" name="__codelineno-12-77"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-12-78" name="__codelineno-12-78"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-12-79" name="__codelineno-12-79"></a>    <span class="p">)</span>
<a id="__codelineno-12-80" name="__codelineno-12-80"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-59">59</a></span>
<span class="normal"><a href="#__codelineno-13-60">60</a></span>
<span class="normal"><a href="#__codelineno-13-61">61</a></span>
<span class="normal"><a href="#__codelineno-13-62">62</a></span>
<span class="normal"><a href="#__codelineno-13-63">63</a></span>
<span class="normal"><a href="#__codelineno-13-64">64</a></span>
<span class="normal"><a href="#__codelineno-13-65">65</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-59" name="__codelineno-13-59"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_use_method</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">TestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-13-60" name="__codelineno-13-60"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">StarletteTestHelper</span><span class="p">(</span>
<a id="__codelineno-13-61" name="__codelineno-13-61"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-13-62" name="__codelineno-13-62"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-13-63" name="__codelineno-13-63"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-13-64" name="__codelineno-13-64"></a>    <span class="p">)</span>
<a id="__codelineno-13-65" name="__codelineno-13-65"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-59">59</a></span>
<span class="normal"><a href="#__codelineno-14-60">60</a></span>
<span class="normal"><a href="#__codelineno-14-61">61</a></span>
<span class="normal"><a href="#__codelineno-14-62">62</a></span>
<span class="normal"><a href="#__codelineno-14-63">63</a></span>
<span class="normal"><a href="#__codelineno-14-64">64</a></span>
<span class="normal"><a href="#__codelineno-14-65">65</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-59" name="__codelineno-14-59"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_use_method</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">SanicTestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-14-60" name="__codelineno-14-60"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">SanicTestHelper</span><span class="p">(</span>
<a id="__codelineno-14-61" name="__codelineno-14-61"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-14-62" name="__codelineno-14-62"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-14-63" name="__codelineno-14-63"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-14-64" name="__codelineno-14-64"></a>    <span class="p">)</span>
<a id="__codelineno-14-65" name="__codelineno-14-65"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-58">58</a></span>
<span class="normal"><a href="#__codelineno-15-59">59</a></span>
<span class="normal"><a href="#__codelineno-15-60">60</a></span>
<span class="normal"><a href="#__codelineno-15-61">61</a></span>
<span class="normal"><a href="#__codelineno-15-62">62</a></span>
<span class="normal"><a href="#__codelineno-15-63">63</a></span>
<span class="normal"><a href="#__codelineno-15-64">64</a></span>
<span class="normal"><a href="#__codelineno-15-65">65</a></span>
<span class="normal"><a href="#__codelineno-15-66">66</a></span>
<span class="normal"><a href="#__codelineno-15-67">67</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-58" name="__codelineno-15-58"></a><span class="k">class</span> <span class="nc">TestTornado</span><span class="p">(</span><span class="n">AsyncHTTPTestCase</span><span class="p">):</span>
<a id="__codelineno-15-59" name="__codelineno-15-59"></a>    <span class="o">...</span>
<a id="__codelineno-15-60" name="__codelineno-15-60"></a>
<a id="__codelineno-15-61" name="__codelineno-15-61"></a>    <span class="k">def</span> <span class="nf">test_demo_post_route_by_use_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-15-62" name="__codelineno-15-62"></a>        <span class="n">test_helper</span> <span class="o">=</span> <span class="n">TornadoTestHelper</span><span class="p">(</span>
<a id="__codelineno-15-63" name="__codelineno-15-63"></a>            <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-15-64" name="__codelineno-15-64"></a>            <span class="n">func</span><span class="o">=</span><span class="n">DemoHandler</span><span class="o">.</span><span class="n">post</span><span class="p">,</span>
<a id="__codelineno-15-65" name="__codelineno-15-65"></a>            <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-15-66" name="__codelineno-15-66"></a>        <span class="p">)</span>
<a id="__codelineno-15-67" name="__codelineno-15-67"></a>        <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>In addition, when writing test cases, may need a response object, rather than response data,
in order to validate data such as status codes, <code>Header</code>, etc.
This can be done by calling the <code>HTTP</code> method of the <code>TestHelper</code> and getting the response object.
The following code makes a request to the route function via the <code>post</code> method and returns the response object of the Web framework's test client,
which is then asserted:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:4"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><input id="__tabbed_5_4" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Flask</label><label for="__tabbed_5_2">Starlette</label><label for="__tabbed_5_3">Sanic</label><label for="__tabbed_5_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-83">83</a></span>
<span class="normal"><a href="#__codelineno-16-84">84</a></span>
<span class="normal"><a href="#__codelineno-16-85">85</a></span>
<span class="normal"><a href="#__codelineno-16-86">86</a></span>
<span class="normal"><a href="#__codelineno-16-87">87</a></span>
<span class="normal"><a href="#__codelineno-16-88">88</a></span>
<span class="normal"><a href="#__codelineno-16-89">89</a></span>
<span class="normal"><a href="#__codelineno-16-90">90</a></span>
<span class="normal"><a href="#__codelineno-16-91">91</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-83" name="__codelineno-16-83"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_raw_web_framework_response</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">FlaskClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-16-84" name="__codelineno-16-84"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">FlaskTestHelper</span><span class="p">(</span>
<a id="__codelineno-16-85" name="__codelineno-16-85"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-16-86" name="__codelineno-16-86"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-16-87" name="__codelineno-16-87"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-16-88" name="__codelineno-16-88"></a>    <span class="p">)</span>
<a id="__codelineno-16-89" name="__codelineno-16-89"></a>    <span class="n">resp</span> <span class="o">=</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
<a id="__codelineno-16-90" name="__codelineno-16-90"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
<a id="__codelineno-16-91" name="__codelineno-16-91"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-68">68</a></span>
<span class="normal"><a href="#__codelineno-17-69">69</a></span>
<span class="normal"><a href="#__codelineno-17-70">70</a></span>
<span class="normal"><a href="#__codelineno-17-71">71</a></span>
<span class="normal"><a href="#__codelineno-17-72">72</a></span>
<span class="normal"><a href="#__codelineno-17-73">73</a></span>
<span class="normal"><a href="#__codelineno-17-74">74</a></span>
<span class="normal"><a href="#__codelineno-17-75">75</a></span>
<span class="normal"><a href="#__codelineno-17-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-68" name="__codelineno-17-68"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_raw_web_framework_response</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">TestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-17-69" name="__codelineno-17-69"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">StarletteTestHelper</span><span class="p">(</span>
<a id="__codelineno-17-70" name="__codelineno-17-70"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-17-71" name="__codelineno-17-71"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-17-72" name="__codelineno-17-72"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-17-73" name="__codelineno-17-73"></a>    <span class="p">)</span>
<a id="__codelineno-17-74" name="__codelineno-17-74"></a>    <span class="n">resp</span> <span class="o">=</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
<a id="__codelineno-17-75" name="__codelineno-17-75"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
<a id="__codelineno-17-76" name="__codelineno-17-76"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-68">68</a></span>
<span class="normal"><a href="#__codelineno-18-69">69</a></span>
<span class="normal"><a href="#__codelineno-18-70">70</a></span>
<span class="normal"><a href="#__codelineno-18-71">71</a></span>
<span class="normal"><a href="#__codelineno-18-72">72</a></span>
<span class="normal"><a href="#__codelineno-18-73">73</a></span>
<span class="normal"><a href="#__codelineno-18-74">74</a></span>
<span class="normal"><a href="#__codelineno-18-75">75</a></span>
<span class="normal"><a href="#__codelineno-18-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-68" name="__codelineno-18-68"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_raw_web_framework_response</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">SanicTestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-18-69" name="__codelineno-18-69"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">SanicTestHelper</span><span class="p">(</span>
<a id="__codelineno-18-70" name="__codelineno-18-70"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-18-71" name="__codelineno-18-71"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-18-72" name="__codelineno-18-72"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-18-73" name="__codelineno-18-73"></a>    <span class="p">)</span>
<a id="__codelineno-18-74" name="__codelineno-18-74"></a>    <span class="n">resp</span> <span class="o">=</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
<a id="__codelineno-18-75" name="__codelineno-18-75"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
<a id="__codelineno-18-76" name="__codelineno-18-76"></a>    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-66">66</a></span>
<span class="normal"><a href="#__codelineno-19-67">67</a></span>
<span class="normal"><a href="#__codelineno-19-68">68</a></span>
<span class="normal"><a href="#__codelineno-19-69">69</a></span>
<span class="normal"><a href="#__codelineno-19-70">70</a></span>
<span class="normal"><a href="#__codelineno-19-71">71</a></span>
<span class="normal"><a href="#__codelineno-19-72">72</a></span>
<span class="normal"><a href="#__codelineno-19-73">73</a></span>
<span class="normal"><a href="#__codelineno-19-74">74</a></span>
<span class="normal"><a href="#__codelineno-19-75">75</a></span>
<span class="normal"><a href="#__codelineno-19-76">76</a></span>
<span class="normal"><a href="#__codelineno-19-77">77</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-66" name="__codelineno-19-66"></a><span class="k">class</span> <span class="nc">TestTornado</span><span class="p">(</span><span class="n">AsyncHTTPTestCase</span><span class="p">):</span>
<a id="__codelineno-19-67" name="__codelineno-19-67"></a>    <span class="o">...</span>
<a id="__codelineno-19-68" name="__codelineno-19-68"></a>
<a id="__codelineno-19-69" name="__codelineno-19-69"></a>    <span class="k">def</span> <span class="nf">test_demo_post_route_by_raw_web_framework_response</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-19-70" name="__codelineno-19-70"></a>        <span class="n">test_helper</span> <span class="o">=</span> <span class="n">TornadoTestHelper</span><span class="p">(</span>
<a id="__codelineno-19-71" name="__codelineno-19-71"></a>            <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-19-72" name="__codelineno-19-72"></a>            <span class="n">func</span><span class="o">=</span><span class="n">DemoHandler</span><span class="o">.</span><span class="n">post</span><span class="p">,</span>
<a id="__codelineno-19-73" name="__codelineno-19-73"></a>            <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">},</span>
<a id="__codelineno-19-74" name="__codelineno-19-74"></a>        <span class="p">)</span>
<a id="__codelineno-19-75" name="__codelineno-19-75"></a>        <span class="n">resp</span> <span class="o">=</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">post</span><span class="p">()</span>
<a id="__codelineno-19-76" name="__codelineno-19-76"></a>        <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">200</span>
<a id="__codelineno-19-77" name="__codelineno-19-77"></a>        <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;{&quot;uid&quot;: 11, &quot;user_name&quot;: &quot;test&quot;}&#39;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Although in this case <code>TestHelper</code> is not much different from the way it is used with the Web framework's corresponding test client.
However, when <code>TestHelper</code> gets the response from the route function,
it will pick the best matching response model from the <code>response_model_list</code> of the route function.
If one of the response object's HTTP status code, header and response data does not match the response model,
an error is thrown and the test case is aborted, for example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:4"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><input id="__tabbed_6_4" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Flask</label><label for="__tabbed_6_2">Starlette</label><label for="__tabbed_6_3">Sanic</label><label for="__tabbed_6_4">Tornado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/flask_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-92">92</a></span>
<span class="normal"><a href="#__codelineno-20-93">93</a></span>
<span class="normal"><a href="#__codelineno-20-94">94</a></span>
<span class="normal"><a href="#__codelineno-20-95">95</a></span>
<span class="normal"><a href="#__codelineno-20-96">96</a></span>
<span class="normal"><a href="#__codelineno-20-97">97</a></span>
<span class="normal"><a href="#__codelineno-20-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-92" name="__codelineno-20-92"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_test_helper_check_response_error</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">FlaskClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-20-93" name="__codelineno-20-93"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">FlaskTestHelper</span><span class="p">(</span>
<a id="__codelineno-20-94" name="__codelineno-20-94"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-20-95" name="__codelineno-20-95"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-20-96" name="__codelineno-20-96"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;return_error_resp&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-20-97" name="__codelineno-20-97"></a>    <span class="p">)</span>
<a id="__codelineno-20-98" name="__codelineno-20-98"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/starlette_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-77">77</a></span>
<span class="normal"><a href="#__codelineno-21-78">78</a></span>
<span class="normal"><a href="#__codelineno-21-79">79</a></span>
<span class="normal"><a href="#__codelineno-21-80">80</a></span>
<span class="normal"><a href="#__codelineno-21-81">81</a></span>
<span class="normal"><a href="#__codelineno-21-82">82</a></span>
<span class="normal"><a href="#__codelineno-21-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-77" name="__codelineno-21-77"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_test_helper_check_response_error</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">TestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-21-78" name="__codelineno-21-78"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">StarletteTestHelper</span><span class="p">(</span>
<a id="__codelineno-21-79" name="__codelineno-21-79"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-21-80" name="__codelineno-21-80"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-21-81" name="__codelineno-21-81"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;return_error_resp&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-21-82" name="__codelineno-21-82"></a>    <span class="p">)</span>
<a id="__codelineno-21-83" name="__codelineno-21-83"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/sanic_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-77">77</a></span>
<span class="normal"><a href="#__codelineno-22-78">78</a></span>
<span class="normal"><a href="#__codelineno-22-79">79</a></span>
<span class="normal"><a href="#__codelineno-22-80">80</a></span>
<span class="normal"><a href="#__codelineno-22-81">81</a></span>
<span class="normal"><a href="#__codelineno-22-82">82</a></span>
<span class="normal"><a href="#__codelineno-22-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-77" name="__codelineno-22-77"></a><span class="k">def</span> <span class="nf">test_demo_post_route_by_test_helper_check_response_error</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">SanicTestClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-22-78" name="__codelineno-22-78"></a>    <span class="n">test_helper</span> <span class="o">=</span> <span class="n">SanicTestHelper</span><span class="p">(</span>
<a id="__codelineno-22-79" name="__codelineno-22-79"></a>        <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
<a id="__codelineno-22-80" name="__codelineno-22-80"></a>        <span class="n">func</span><span class="o">=</span><span class="n">demo_post</span><span class="p">,</span>
<a id="__codelineno-22-81" name="__codelineno-22-81"></a>        <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;return_error_resp&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-22-82" name="__codelineno-22-82"></a>    <span class="p">)</span>
<a id="__codelineno-22-83" name="__codelineno-22-83"></a>    <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">docs_source_code/unit_test_helper/tornado_test_helper_demo.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-76">76</a></span>
<span class="normal"><a href="#__codelineno-23-77">77</a></span>
<span class="normal"><a href="#__codelineno-23-78">78</a></span>
<span class="normal"><a href="#__codelineno-23-79">79</a></span>
<span class="normal"><a href="#__codelineno-23-80">80</a></span>
<span class="normal"><a href="#__codelineno-23-81">81</a></span>
<span class="normal"><a href="#__codelineno-23-82">82</a></span>
<span class="normal"><a href="#__codelineno-23-83">83</a></span>
<span class="normal"><a href="#__codelineno-23-84">84</a></span>
<span class="normal"><a href="#__codelineno-23-85">85</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-76" name="__codelineno-23-76"></a><span class="k">class</span> <span class="nc">TestTornado</span><span class="p">(</span><span class="n">AsyncHTTPTestCase</span><span class="p">):</span>
<a id="__codelineno-23-77" name="__codelineno-23-77"></a>    <span class="o">...</span>
<a id="__codelineno-23-78" name="__codelineno-23-78"></a>
<a id="__codelineno-23-79" name="__codelineno-23-79"></a>    <span class="k">def</span> <span class="nf">test_demo_post_route_by_test_helper_check_response_error</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-23-80" name="__codelineno-23-80"></a>        <span class="n">test_helper</span> <span class="o">=</span> <span class="n">TornadoTestHelper</span><span class="p">(</span>
<a id="__codelineno-23-81" name="__codelineno-23-81"></a>            <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-23-82" name="__codelineno-23-82"></a>            <span class="n">func</span><span class="o">=</span><span class="n">DemoHandler</span><span class="o">.</span><span class="n">post</span><span class="p">,</span>
<a id="__codelineno-23-83" name="__codelineno-23-83"></a>            <span class="n">body_dict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;return_error_resp&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-23-84" name="__codelineno-23-84"></a>        <span class="p">)</span>
<a id="__codelineno-23-85" name="__codelineno-23-85"></a>        <span class="k">assert</span> <span class="n">test_helper</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;uid&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>After executing the test case,
<code>TestHelper</code> will find that the response result of the route function does not match the response model of the route function,
then it will throw an exception, interrupt the test case and output the result as follows:
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>&gt;<span class="w"> </span>raise<span class="w"> </span>exc
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>E<span class="w"> </span>pait.app.base.test_helper.CheckResponseException:<span class="w"> </span>maybe<span class="w"> </span>error<span class="w"> </span>result:
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>E<span class="w"> </span>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>E<span class="w"> </span>check<span class="w"> </span>json<span class="w"> </span>content<span class="w"> </span>error,<span class="w"> </span>exec:<span class="w"> </span><span class="m">2</span><span class="w"> </span>validation<span class="w"> </span>errors<span class="w"> </span><span class="k">for</span><span class="w"> </span>ResponseModel
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>E<span class="w"> </span>uid
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>E<span class="w">   </span>field<span class="w"> </span>required<span class="w"> </span><span class="o">(</span><span class="nv">type</span><span class="o">=</span>value_error.missing<span class="o">)</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>E<span class="w"> </span>user_name
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>E<span class="w">   </span>field<span class="w"> </span>required<span class="w"> </span><span class="o">(</span><span class="nv">type</span><span class="o">=</span>value_error.missing<span class="o">)</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>E
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>E<span class="w"> </span>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>E<span class="w"> </span>by<span class="w"> </span>response<span class="w"> </span>model:&lt;class<span class="w"> </span><span class="s1">&#39;docs_source_code.unit_test_helper.flask_test_helper_demo.DemoResponseModel&#39;</span>&gt;
</code></pre></div>
The output shows that the exception thrown is <code>CheckResponseException</code>. Meanwhile, according to the exception message,
can understand that the response model for this validation is <code>DemoResponseModel</code>,
and it found that the response data is missing the <code>uid</code> field and <code>user_name</code> field during the validation process.</p>
<h2 id="2parameter-introduction">2.Parameter introduction</h2>
<p>The parameters of <code>TestHelper</code> are divided into three types:
initialization parameters, request-related parameters, and response-related result parameters.
Among them, the initialization parameters are described as follows:</p>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>client</td>
<td>The test client for the Web framework</td>
</tr>
<tr>
<td>func</td>
<td>The route function to be tested</td>
</tr>
</tbody>
</table>
<p>There are multiple request parameters, which for most web frameworks encapsulate a layer of calls,
but for using frameworks such as <code>Tornado</code> that don't encapsulate the test client much,
request parameters provide some convenience, and these parameters are described as follows:</p>
<ul>
<li>body_dict: Json data of the request.</li>
<li>cookie_dict: Cookie data of the request.</li>
<li>file_dict: File data of the request.</li>
<li>form_dict: Form data of the request.</li>
<li>header_dict: Header data of the request.</li>
<li>path_dict: Path data of the request.</li>
<li>query_dict: Query data of the request.</li>
</ul>
<p>In addition to this, <code>TestHelper</code> has some parameters related to response result validation, such as <code>strict_inspection_check_json_content</code>.
By default, the <code>strict_inspection_check_json_content</code> parameter has a value of True,
which will allow <code>TestHelper</code> to perform strict checks on the data structure of the response result, as in the following example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">a</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    <span class="p">}</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="p">}</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="n">b</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>    <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>        <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mi">4</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>    <span class="p">}</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="p">}</span>
</code></pre></div>
In this example, <code>a</code> and <code>b</code> have different data structures,
where the <code>a</code> represents the data structure of the response model and the <code>b</code> is the data structure of the response body.
When <code>TestHelper</code> performs the validation, it will throw an error because it detects an extra structure <code>['b']['d']</code> in the <code>b</code>.
However, it is possible to set the parameter <code>strict_inspection_check_json_content</code> to <code>False</code>,
so that <code>TestHelper</code> will only validate fields that appear in the response model, and will not check fields outside the response model.</p>
<p>In addition to the above, <code>TestHelper</code> has several other parameters, as follows:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>target_pait_response_class</td>
<td>If the value is not null, then <code>TestHelper</code> will filter a batch of eligible <code>response_models</code> from the <code>response_model_list</code> by <code>target_pait_response_class</code> to perform the calibration. This value is usually the parent class of the response model, and the default value of <code>None</code> means no match.</td>
</tr>
<tr>
<td>enable_assert_response</td>
<td>Indicates whether <code>TestHelper</code> will assert the response result, default value is True.</td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/so1n" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.top", "navigation.path", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
        <script src="../termynal.js"></script>
      
    
  </body>
</html>